suite: Init template (existing admin user secret)
release:
  name: forgejo-unittests
  namespace: testing
templates:
  - templates/gitea/init.yaml
tests:
  - it: contains configure_admin_user section
    set:
      gitea.admin.existingSecret: 'some-secret'
    asserts:
      - matchRegex:
          path: stringData["configure_gitea.sh"]
          pattern: configure_admin_user
