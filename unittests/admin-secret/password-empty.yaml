suite: Admin Secret template (empty password, the default)
release:
  name: forgejo-unittests
  namespace: testing
templates:
  - templates/gitea/admin-secret.yaml
tests:
  - it: renders a secret
    asserts:
      - hasDocuments:
          count: 1
      - containsDocument:
          kind: Secret
          apiVersion: v1
          name: forgejo-unittests-admin
  - it: has correct values
    asserts:
      - isNotNull:
          path: data.password
      - equal:
          decodeBase64: true
          path: data.username
          value: gitea_admin
