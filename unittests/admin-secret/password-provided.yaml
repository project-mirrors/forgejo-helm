suite: Admin Secret template (password provided)
release:
  name: forgejo-unittests
  namespace: testing
templates:
  - templates/gitea/admin-secret.yaml
tests:
  - it: renders a secret
    set:
      gitea.admin.password: 'test123'
    asserts:
      - hasDocuments:
          count: 1
      - containsDocument:
          kind: Secret
          apiVersion: v1
          name: forgejo-unittests-admin
  - it: has correct values
    set:
      gitea.admin.password: 'test123'
    asserts:
      - equal:
          decodeBase64: true
          path: data.password
          value: test123
      - equal:
          decodeBase64: true
          path: data.username
          value: gitea_admin
